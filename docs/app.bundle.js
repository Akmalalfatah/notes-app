/*! For license information please see app.bundle.js.LICENSE.txt */
(()=>{"use strict";var t,n,e={},r={};function o(t){var n=r[t];if(void 0!==n)return n.exports;var i=r[t]={exports:{}};return e[t](i,i.exports,o),i.exports}o.m=e,o.d=(t,n)=>{for(var e in n)o.o(n,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce(((n,e)=>(o.f[e](t,n),n)),[])),o.u=t=>t+".bundle.js",o.miniCssF=t=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),t={},n="app-starter-project-with-webpack:",o.l=(e,r,i,a)=>{if(t[e])t[e].push(r);else{var u,c;if(void 0!==i)for(var s=document.getElementsByTagName("script"),f=0;f<s.length;f++){var l=s[f];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==n+i){u=l;break}}u||(c=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.setAttribute("data-webpack",n+i),u.src=e),t[e]=[r];var p=(n,r)=>{u.onerror=u.onload=null,clearTimeout(v);var o=t[e];if(delete t[e],u.parentNode&&u.parentNode.removeChild(u),o&&o.forEach((t=>t(r))),n)return n(r)},v=setTimeout(p.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=p.bind(null,u.onerror),u.onload=p.bind(null,u.onload),c&&document.head.appendChild(u)}},o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var n=o.g.document;if(!t&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(t=n.currentScript.src),!t)){var e=n.getElementsByTagName("script");if(e.length)for(var r=e.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=e[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),(()=>{var t={524:0};o.f.j=(n,e)=>{var r=o.o(t,n)?t[n]:void 0;if(0!==r)if(r)e.push(r[2]);else{var i=new Promise(((e,o)=>r=t[n]=[e,o]));e.push(r[2]=i);var a=o.p+o.u(n),u=new Error;o.l(a,(e=>{if(o.o(t,n)&&(0!==(r=t[n])&&(t[n]=void 0),r)){var i=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;u.message="Loading chunk "+n+" failed.\n("+i+": "+a+")",u.name="ChunkLoadError",u.type=i,u.request=a,r[1](u)}}),"chunk-"+n,n)}};var n=(n,e)=>{var r,i,[a,u,c]=e,s=0;if(a.some((n=>0!==t[n]))){for(r in u)o.o(u,r)&&(o.m[r]=u[r]);c&&c(o)}for(n&&n(e);s<a.length;s++)i=a[s],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0},e=self.webpackChunkapp_starter_project_with_webpack=self.webpackChunkapp_starter_project_with_webpack||[];e.forEach(n.bind(null,0)),e.push=n.bind(null,e.push.bind(e))})();var i={};o.r(i),o.d(i,{getAccessToken:()=>E,getLogout:()=>G,putAccessToken:()=>N,removeAccessToken:()=>I});var a={};function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(){var t=y(),n=t.m(c),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,s(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(c=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new d(t,n)},AsyncIterator:v,async:function(t,n,e,o,a){return(r(n)?p:l)(i(t),n,e,o,a)},keys:f,values:s}})()}function s(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(u(t)+" is not iterable")}function f(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function l(t,n,e,r,o){var i=p(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function p(t,n,e,r,o){return new v(y().w(t,n,e,r),o||Promise)}function v(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof d?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(h(v.prototype),h(v.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),h(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function y(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return h(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(h(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,h(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,h(l,"constructor",s),h(s,"constructor",c),c.displayName="GeneratorFunction",h(s,o,"GeneratorFunction"),h(l),h(l,o,"Generator"),h(l,r,(function(){return this})),h(l,"toString",(function(){return"[object Generator]"})),(y=function(){return{w:i,m:p}})()}function h(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}h=function(t,n,e,r){function i(n,e){h(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},h(t,n,e,r)}function d(t,n){this.v=t,this.k=n}function m(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function b(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){m(i,r,o,a,u,"next",t)}function u(t){m(i,r,o,a,u,"throw",t)}a(void 0)}))}}function g(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function w(t,n,e){return(n=function(t){var n=function(t){if("object"!=u(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=u(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function k(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,r=atob(t),o=[],i=0;i<r.length;i+=e){for(var a=r.slice(i,i+e),u=new Array(a.length),c=0;c<a.length;c++)u[c]=a.charCodeAt(c);var s=new Uint8Array(u);o.push(s)}return new Blob(o,{type:n})}function x(t){for(var n=(t+"=".repeat((4-t.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),e=window.atob(n),r=new Uint8Array(e.length),o=0;o<e.length;++o)r[o]=e.charCodeAt(o);return r}function S(t){var n=t.skipTransition,e=void 0!==n&&n,r=t.updateDOM;if(e||"function"!=typeof document.startViewTransition){var o=b(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r();case 2:case"end":return t.stop()}}),t)})))();return{ready:Promise.resolve(),updateCallbackDone:o,finished:o}}return document.startViewTransition(b(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r();case 2:case"end":return t.stop()}}),t)}))))}function O(){return j.apply(this,arguments)}function j(){return(j=b(c().mark((function t(){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("serviceWorker"in navigator){t.next=3;break}return console.warn("tidak support Service Worker API"),t.abrupt("return",null);case 3:return t.prev=3,n=null,t.prev=5,t.next=8,navigator.serviceWorker.register("/sw.js");case 8:n=t.sent,t.next=16;break;case 11:return t.prev=11,t.t0=t.catch(5),t.next=15,navigator.serviceWorker.register("./sw.bundle.js");case 15:n=t.sent;case 16:return console.log("Service Worker registered berhasil:",n),t.abrupt("return",n);case 20:return t.prev=20,t.t1=t.catch(3),console.error("tidak bisa install Service Worker:",t.t1),t.abrupt("return",null);case 24:case"end":return t.stop()}}),t,null,[[3,20],[5,11]])})))).apply(this,arguments)}function _(t){var n=t.id,e=t.name,r=t.description,o=t.photoUrl,i=t.createdAt,a=t.lat,u=t.lon,c=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Date(t).toLocaleDateString(n,function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?g(Object(e),!0).forEach((function(n){w(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):g(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}({year:"numeric",month:"long",day:"numeric"},e))}(i),s="number"==typeof a&&"number"==typeof u?"(Lat: ".concat(a.toFixed(5),", Lon: ").concat(u.toFixed(5),")"):"";return'\n        <div tabindex="0" class="card-item" data-item="'.concat(n,'">\n            <button class="bookmark-button" data-id="').concat(n,'">Bookmark</button>\n            <img class="card-item__image" src="').concat(o,'" alt="Ilustrasi cerita ').concat(e,'">\n            \n            <div class="card-item__body">\n                <div class="card-item__main">\n                    <h2 class="card-item__title">').concat(e,'</h2>\n                    <p class="card-item__description">').concat(r,'</p>\n                </div>\n                <p class="card-item__meta">\n                    Dipublikasikan: ').concat(c,"\n                    ").concat(s,"\n                </p>\n            </div>\n        </div>\n    ")}o.r(a),o.d(a,{getAllStories:()=>et,getLogin:()=>tt,getRegistered:()=>Q,storeNewStory:()=>ot,subscribePushNotification:()=>at,unsubscribePushNotification:()=>ct});var P="https://story-api.dicoding.dev/v1",T="ACCESS_TOKEN";function E(){try{var t=localStorage.getItem(T);return t&&"null"!==t&&"undefined"!==t?t:null}catch(t){return console.error("getAccessToken error:",t),null}}function N(t){try{return localStorage.setItem(T,t),!0}catch(t){return console.error("putAccessToken error:",t),!1}}function I(){try{return localStorage.removeItem(T),!0}catch(t){return console.error("removeAccessToken error:",t),!1}}function G(){I(),location.hash="/login"}var F=["expirationTime"];function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function A(t,n){if(null==t)return{};var e,r,o=function(t,n){if(null==t)return{};var e={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==n.indexOf(r))continue;e[r]=t[r]}return e}(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)e=i[r],-1===n.indexOf(e)&&{}.propertyIsEnumerable.call(t,e)&&(o[e]=t[e])}return o}function B(){var t=R(),n=t.m(B),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,C(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(B=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new U(t,n)},AsyncIterator:z,async:function(t,n,e,o,a){return(r(n)?H:D)(i(t),n,e,o,a)},keys:W,values:C}})()}function C(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(M(t)+" is not iterable")}function W(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function D(t,n,e,r,o){var i=H(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function H(t,n,e,r,o){return new z(R().w(t,n,e,r),o||Promise)}function z(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof U?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Y(z.prototype),Y(z.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Y(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function R(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Y(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Y(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Y(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Y(l,"constructor",s),Y(s,"constructor",c),c.displayName="GeneratorFunction",Y(s,o,"GeneratorFunction"),Y(l),Y(l,o,"Generator"),Y(l,r,(function(){return this})),Y(l,"toString",(function(){return"[object Generator]"})),(R=function(){return{w:i,m:p}})()}function Y(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Y=function(t,n,e,r){function i(n,e){Y(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},Y(t,n,e,r)}function U(t,n){this.v=t,this.k=n}function q(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function K(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?q(Object(e),!0).forEach((function(n){J(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):q(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function J(t,n,e){return(n=function(t){var n=function(t){if("object"!=M(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=M(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==M(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function V(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function $(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){V(i,r,o,a,u,"next",t)}function u(t){V(i,r,o,a,u,"throw",t)}a(void 0)}))}}var Z={REGISTER:"".concat(P,"/register"),LOGIN:"".concat(P,"/login"),STORY_LIST:"".concat(P,"/stories"),STORE_NEW_STORY:"".concat(P,"/stories"),STORY_DETAIL:function(t){return"".concat(P,"/stories/").concat(t)}};function Q(t){return X.apply(this,arguments)}function X(){return(X=$(B().mark((function t(n){var e,r,o,i,a,u;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.name,r=n.email,o=n.password,i=JSON.stringify({name:e,email:r,password:o}),t.next=4,fetch(Z.REGISTER,{method:"POST",headers:{"Content-Type":"application/json"},body:i});case 4:return a=t.sent,t.next=7,a.json();case 7:return u=t.sent,t.abrupt("return",K(K({},u),{},{ok:a.ok}));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function tt(t){return nt.apply(this,arguments)}function nt(){return(nt=$(B().mark((function t(n){var e,r,o,i,a;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.email,r=n.password,o=JSON.stringify({email:e,password:r}),t.next=4,fetch(Z.LOGIN,{method:"POST",headers:{"Content-Type":"application/json"},body:o});case 4:return i=t.sent,t.next=7,i.json();case 7:return a=t.sent,t.abrupt("return",K(K({},a),{},{ok:i.ok,status:i.status}));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function et(){return rt.apply(this,arguments)}function rt(){return rt=$(B().mark((function t(){var n,e,r,o,i=arguments;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.length>0&&void 0!==i[0]?i[0]:"?page=1&size=8",e=E()){t.next=4;break}throw new Error("Silakan login terlebih dahulu.");case 4:return t.next=6,fetch("".concat(Z.STORY_LIST).concat(n),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});case 6:return r=t.sent,t.next=9,r.json();case 9:return o=t.sent,t.abrupt("return",K(K({},o),{},{ok:r.ok}));case 11:case"end":return t.stop()}}),t)}))),rt.apply(this,arguments)}function ot(t){return it.apply(this,arguments)}function it(){return(it=$(B().mark((function t(n){var e,r,o,i,a,u,c;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.description,r=n.photo,o=E()){t.next=4;break}throw new Error("Akses ditolak. Anda harus login");case 4:return(i=new FormData).append("description",e),i.append("photo",r),a={method:"POST",headers:{Authorization:"Bearer ".concat(o)},body:i},t.next=10,fetch(Z.STORE_NEW_STORY,a);case 10:return u=t.sent,t.next=13,u.json();case 13:return c=t.sent,t.abrupt("return",K(K({},c),{},{ok:u.ok}));case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function at(t){return ut.apply(this,arguments)}function ut(){return(ut=$(B().mark((function t(n){var e,r,o,i,a;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=E()){t.next=3;break}throw new Error("Token tidak tersedia. Silakan login kembali.");case 3:return n.expirationTime,r=A(n,F),t.prev=4,t.next=7,fetch("".concat(P,"/notifications/subscribe"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(r)});case 7:if((o=t.sent).ok){t.next=13;break}return t.next=11,o.text();case 11:throw i=t.sent,new Error("Gagal mendaftarkan notifikasi (".concat(o.status,"): ").concat(i));case 13:return t.next=15,o.json();case 15:return a=t.sent,console.log("Subscription berhasil dikirim ke server"),t.abrupt("return",a);case 20:throw t.prev=20,t.t0=t.catch(4),console.error("Gagal kirim subscription ke server:",t.t0),t.t0;case 24:case"end":return t.stop()}}),t,null,[[4,20]])})))).apply(this,arguments)}function ct(t){return st.apply(this,arguments)}function st(){return(st=$(B().mark((function t(n){var e,r,o;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e=E()){t.next=4;break}throw new Error("Token tidak tersedia");case 4:return t.next=6,fetch("".concat(P,"/notifications/subscribe"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({endpoint:n.endpoint})});case 6:if((r=t.sent).ok){t.next=12;break}return t.next=10,r.text();case 10:throw o=t.sent,new Error("Gagal berhenti langganan (".concat(r.status,"): ").concat(o));case 12:return console.log("Subscription berhasil dihapus di server."),t.next=15,r.json();case 15:return t.abrupt("return",t.sent);case 18:throw t.prev=18,t.t0=t.catch(0),console.error("Gagal hapus subscription di server:",t.t0),t.t0;case 22:case"end":return t.stop()}}),t,null,[[0,18]])})))).apply(this,arguments)}function ft(t){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(t)}function lt(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function pt(){var t=bt(),n=t.m(pt),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,vt(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(pt=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new wt(t,n)},AsyncIterator:mt,async:function(t,n,e,o,a){return(r(n)?dt:ht)(i(t),n,e,o,a)},keys:yt,values:vt}})()}function vt(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(ft(t)+" is not iterable")}function yt(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function ht(t,n,e,r,o){var i=dt(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function dt(t,n,e,r,o){return new mt(bt().w(t,n,e,r),o||Promise)}function mt(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof wt?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(gt(mt.prototype),gt(mt.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),gt(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function bt(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return gt(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(gt(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,gt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,gt(l,"constructor",s),gt(s,"constructor",c),c.displayName="GeneratorFunction",gt(s,o,"GeneratorFunction"),gt(l),gt(l,o,"Generator"),gt(l,r,(function(){return this})),gt(l,"toString",(function(){return"[object Generator]"})),(bt=function(){return{w:i,m:p}})()}function gt(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}gt=function(t,n,e,r){function i(n,e){gt(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},gt(t,n,e,r)}function wt(t,n){this.v=t,this.k=n}function kt(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function xt(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){kt(i,r,o,a,u,"next",t)}function u(t){kt(i,r,o,a,u,"throw",t)}a(void 0)}))}}function St(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ot(r.key),r)}}function Ot(t){var n=function(t){if("object"!=ft(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=ft(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ft(n)?n:n+""}function jt(t,n,e){_t(t,n),n.set(t,e)}function _t(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Pt(t,n){return t.get(Et(t,n))}function Tt(t,n,e){return t.set(Et(t,n),e),e}function Et(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var Nt=new WeakMap,It=new WeakMap,Gt=new WeakMap,Lt=new WeakMap,Ft=new WeakMap,Mt=new WeakMap,At=new WeakSet,Bt=function(){return t=function t(n){var e,r=n.view,o=n.model;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),_t(this,e=At),e.add(this),jt(this,Nt,void 0),jt(this,It,void 0),jt(this,Gt,1),jt(this,Lt,8),jt(this,Ft,[]),jt(this,Mt,!0),Tt(Nt,this,r),Tt(It,this,o||{getAllStories:et})},n=[{key:"getCurrentStories",value:function(){return Pt(Ft,this)}},{key:"fetchStories",value:function(){var t=xt(pt().mark((function t(){return pt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Pt(Nt,this).showLoading(),Tt(Gt,this,1),Tt(Ft,this,[]),E()){t.next=7;break}return Pt(Nt,this).displayError("Anda harus masuk untuk melihat daftar cerita."),t.abrupt("return");case 7:return t.next=9,Et(At,this,Ct).call(this);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"loadNextStories",value:(e=xt(pt().mark((function t(){return pt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Pt(Mt,this)){t.next=2;break}return t.abrupt("return",[]);case 2:return Pt(Nt,this).showLoadMoreButton(!0,!0),Tt(Gt,this,Pt(Gt,this)+1),t.next=6,Et(At,this,Ct).call(this);case 6:return t.abrupt("return",Pt(Ft,this));case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}],n&&St(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e}();function Ct(){return Wt.apply(this,arguments)}function Wt(){return(Wt=xt(pt().mark((function t(){var n,e,r,o;return pt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e="?page=".concat(Pt(Gt,this),"&size=").concat(Pt(Lt,this)),"function"!=typeof Pt(It,this).getAllStories){t.next=8;break}return t.next=5,Pt(It,this).getAllStories(e);case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,et(e);case 10:t.t0=t.sent;case 11:if((r=t.t0).ok){t.next=14;break}throw new Error(r.message||"Gagal memuat data cerita.");case 14:o=r.listStory||[],(n=Pt(Ft,this)).push.apply(n,function(t){if(Array.isArray(t))return lt(t)}(i=o)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||function(t,n){if(t){if("string"==typeof t)return lt(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?lt(t,n):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),Tt(Mt,this,o.length===Pt(Lt,this)),Pt(Nt,this).displayStories(Pt(Ft,this)),t.next=24;break;case 20:t.prev=20,t.t1=t.catch(0),console.error("HomePresenter error:",t.t1),Pt(Nt,this).displayError(t.t1.message||"Terjadi kesalahan saat mengambil data.");case 24:return t.prev=24,Pt(Nt,this).hideLoading(),Pt(Nt,this).showLoadMoreButton(Pt(Mt,this)&&Pt(Ft,this).length>0,!1),t.finish(24);case 28:case"end":return t.stop()}var i}),t,this,[[0,20,24,28]])})))).apply(this,arguments)}function Dt(t){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(t)}function Ht(){var t=Kt(),n=t.m(Ht),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,zt(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Ht=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Vt(t,n)},AsyncIterator:qt,async:function(t,n,e,o,a){return(r(n)?Ut:Yt)(i(t),n,e,o,a)},keys:Rt,values:zt}})()}function zt(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Dt(t)+" is not iterable")}function Rt(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Yt(t,n,e,r,o){var i=Ut(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Ut(t,n,e,r,o){return new qt(Kt().w(t,n,e,r),o||Promise)}function qt(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Vt?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Jt(qt.prototype),Jt(qt.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Jt(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Kt(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Jt(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Jt(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Jt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Jt(l,"constructor",s),Jt(s,"constructor",c),c.displayName="GeneratorFunction",Jt(s,o,"GeneratorFunction"),Jt(l),Jt(l,o,"Generator"),Jt(l,r,(function(){return this})),Jt(l,"toString",(function(){return"[object Generator]"})),(Kt=function(){return{w:i,m:p}})()}function Jt(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Jt=function(t,n,e,r){function i(n,e){Jt(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},Jt(t,n,e,r)}function Vt(t,n){this.v=t,this.k=n}function $t(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Zt(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function Qt(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?Zt(Object(e),!0).forEach((function(n){Xt(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Zt(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function Xt(t,n,e){return(n=nn(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function tn(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nn(r.key),r)}}function nn(t){var n=function(t){if("object"!=Dt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Dt(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Dt(n)?n:n+""}function en(t,n,e){(function(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,n),n.set(t,e)}function rn(t,n){return t.get(an(t,n))}function on(t,n,e){return t.set(an(t,n),e),e}function an(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var un=new WeakMap,cn=new WeakMap;const sn=function(){function t(n,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),en(this,un,void 0),en(this,cn,void 0);var r="string"==typeof n?document.querySelector(n):n;if(!r)throw new Error('Map container "'.concat(n,'" not found in DOM'));null===r.offsetParent&&(console.warn("Map container is hidden, making it visible..."),r.style.display="block"),on(un,this,L.map(r).setView(e.center||[-6.2,106.8],e.zoom||13)),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors",maxZoom:19}).addTo(rn(un,this))}return n=t,e=[{key:"addSingleDraggableMarker",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return rn(cn,this)&&rn(un,this).removeLayer(rn(cn,this)),on(cn,this,L.marker(t,Qt(Qt({},n),{},{draggable:!0})).addTo(rn(un,this))),rn(cn,this)}},{key:"addMarker",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return L.marker(t,Qt(Qt({},n),{},{draggable:!1})).addTo(rn(un,this))}},{key:"setSingleMarker",value:function(t){rn(cn,this)&&rn(un,this).removeLayer(rn(cn,this)),on(cn,this,t)}},{key:"getSingleMarker",value:function(){return rn(cn,this)}},{key:"addMapEventListener",value:function(t,n){rn(un,this).on(t,n)}},{key:"getCenter",value:function(){var t=rn(un,this).getCenter();return{lat:t.lat,lng:t.lng}}},{key:"locateUser",value:function(){var t=this;rn(un,this).locate({setView:!0,maxZoom:16}),rn(un,this).on("locationfound",(function(n){var e=n.latlng,r=e.lat,o=e.lng;rn(un,t).setView([r,o],16),t.addSingleDraggableMarker([r,o])})),rn(un,this).on("locationerror",(function(t){console.warn("Location error:",t.message),alert("Lokasi tidak bisa diakses. Klik peta untuk menandai.")}))}},{key:"getLeafletMap",value:function(){return rn(un,this)}},{key:"invalidateSize",value:function(){rn(un,this)&&rn(un,this).invalidateSize()}}],r=[{key:"build",value:(o=Ht().mark((function n(e){var r,o,i,a=arguments;return Ht().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},o=function(){return new Promise((function(t,n){if("undefined"==typeof L)var e=0,r=setInterval((function(){e++,"undefined"!=typeof L?(clearInterval(r),t()):e>=100&&(clearInterval(r),n(new Error("Leaflet load timeout")))}),100);else t()}))},i=function(t){return new Promise((function(n,e){var r=function(){var e="string"==typeof t?document.querySelector(t):t;e&&e.offsetHeight>0&&e.offsetWidth>0?n(e):requestAnimationFrame(r)};r(),setTimeout((function(){e(new Error("Container ".concat(t," not ready after 10s")))}),1e4)}))},n.prev=3,n.next=6,o();case 6:return n.next=8,i(e);case 8:return n.abrupt("return",new Promise((function(n,o){try{var i=new t(e,r);rn(un,i).whenReady((function(){setTimeout((function(){rn(un,i).invalidateSize()}),100);var t=rn(un,i).getCenter();i.addSingleDraggableMarker([t.lat,t.lng]),r.locate&&i.locateUser(),n(i)}))}catch(t){o(t)}})));case 11:throw n.prev=11,n.t0=n.catch(3),console.error("Map build failed:",n.t0),n.t0;case 15:case"end":return n.stop()}}),n,null,[[3,11]])})),i=function(){var t=this,n=arguments;return new Promise((function(e,r){var i=o.apply(t,n);function a(t){$t(i,e,r,a,u,"next",t)}function u(t){$t(i,e,r,a,u,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})}],e&&tn(n.prototype,e),r&&tn(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,e,r,o,i}();function fn(t){return fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fn(t)}function ln(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return pn(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?pn(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw i}}}}function pn(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function vn(){var t=gn(),n=t.m(vn),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,yn(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(vn=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new kn(t,n)},AsyncIterator:bn,async:function(t,n,e,o,a){return(r(n)?mn:dn)(i(t),n,e,o,a)},keys:hn,values:yn}})()}function yn(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(fn(t)+" is not iterable")}function hn(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function dn(t,n,e,r,o){var i=mn(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function mn(t,n,e,r,o){return new bn(gn().w(t,n,e,r),o||Promise)}function bn(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof kn?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(wn(bn.prototype),wn(bn.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),wn(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function gn(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return wn(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(wn(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,wn(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,wn(l,"constructor",s),wn(s,"constructor",c),c.displayName="GeneratorFunction",wn(s,o,"GeneratorFunction"),wn(l),wn(l,o,"Generator"),wn(l,r,(function(){return this})),wn(l,"toString",(function(){return"[object Generator]"})),(gn=function(){return{w:i,m:p}})()}function wn(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}wn=function(t,n,e,r){function i(n,e){wn(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},wn(t,n,e,r)}function kn(t,n){this.v=t,this.k=n}function xn(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Sn(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){xn(i,r,o,a,u,"next",t)}function u(t){xn(i,r,o,a,u,"throw",t)}a(void 0)}))}}var On="subscriptions",jn="stories",_n="pending_stories",Pn="bookmarks";function Tn(){return new Promise((function(t,n){var e=indexedDB.open("bukukami-db",2);e.onerror=function(){return n("Gagal membuka IndexedDB")},e.onsuccess=function(){return t(e.result)},e.onupgradeneeded=function(t){var n=t.target.result;n.objectStoreNames.contains(On)||n.createObjectStore(On,{keyPath:"endpoint"}),n.objectStoreNames.contains(jn)||n.createObjectStore(jn,{keyPath:"id"}),n.objectStoreNames.contains(_n)||n.createObjectStore(_n,{keyPath:"tempId",autoIncrement:!0}),n.objectStoreNames.contains(Pn)||n.createObjectStore(Pn,{keyPath:"id"})}}))}function En(t){return Nn.apply(this,arguments)}function Nn(){return(Nn=Sn(vn().mark((function t(n){var e,r;return vn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tn();case 2:return e=t.sent,(r=e.transaction(On,"readwrite")).objectStore(On).put(n),t.next=8,new Promise((function(t,n){r.oncomplete=function(){return t()},r.onerror=function(){return n(r.error)}}));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function In(t){return Gn.apply(this,arguments)}function Gn(){return(Gn=Sn(vn().mark((function t(n){var e,r;return vn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tn();case 2:return e=t.sent,(r=e.transaction(On,"readwrite")).objectStore(On).delete(n),t.next=8,new Promise((function(t,n){r.oncomplete=function(){return t()},r.onerror=function(){return n(r.error)}}));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ln(t){return Fn.apply(this,arguments)}function Fn(){return(Fn=Sn(vn().mark((function t(n){var e,r;return vn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tn();case 2:return e=t.sent,(r=e.transaction(Pn,"readwrite")).objectStore(Pn).put(n),t.next=8,new Promise((function(t,n){r.oncomplete=function(){return t()},r.onerror=function(){return n(r.error)}}));case 8:console.log("Story tersimpan di bookmark IndexedDB:",n.id);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Mn(){return An.apply(this,arguments)}function An(){return(An=Sn(vn().mark((function t(){var n,e,r;return vn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tn();case 2:return n=t.sent,e=n.transaction(Pn,"readonly"),r=e.objectStore(Pn),t.abrupt("return",new Promise((function(t,n){var e=r.getAll();e.onsuccess=function(){return t(e.result||[])},e.onerror=function(){return n(e.error)}})));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Bn(t){return Cn.apply(this,arguments)}function Cn(){return(Cn=Sn(vn().mark((function t(n){var e,r,o;return vn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tn();case 2:return e=t.sent,r=e.transaction(Pn,"readonly"),o=r.objectStore(Pn),t.abrupt("return",new Promise((function(t,e){var r=o.get(n);r.onsuccess=function(){return t(r.result||null)},r.onerror=function(){return e(r.error)}})));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Wn(t){return Dn.apply(this,arguments)}function Dn(){return(Dn=Sn(vn().mark((function t(n){var e;return vn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Bn(n);case 2:return e=t.sent,t.abrupt("return",!!e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Hn(t){return zn.apply(this,arguments)}function zn(){return(zn=Sn(vn().mark((function t(n){var e,r;return vn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tn();case 2:return e=t.sent,(r=e.transaction(Pn,"readwrite")).objectStore(Pn).delete(n),t.next=8,new Promise((function(t,n){r.oncomplete=function(){return t()},r.onerror=function(){return n(r.error)}}));case 8:console.log("Story dihapus dari bookmark IndexedDB:",n);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Rn(t){return Yn.apply(this,arguments)}function Yn(){return(Yn=Sn(vn().mark((function t(n){return vn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Wn(n.id);case 2:if(!t.sent){t.next=9;break}return t.next=6,Hn(n.id);case 6:return t.abrupt("return",!1);case 9:return t.next=11,Ln(n);case 11:return t.abrupt("return",!0);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Un(t){return qn.apply(this,arguments)}function qn(){return(qn=Sn(vn().mark((function t(n){var e,r,o,i,a,u;return vn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tn();case 2:e=t.sent,r=e.transaction(jn,"readwrite"),o=r.objectStore(jn),i=ln(n);try{for(i.s();!(a=i.n()).done;)u=a.value,o.put(u)}catch(t){i.e(t)}finally{i.f()}return t.next=9,new Promise((function(t,n){r.oncomplete=function(){return t()},r.onerror=function(){return n(r.error)}}));case 9:console.log("Stories tersimpan di cache IndexedDB:",n.length);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Kn(t){return Jn.apply(this,arguments)}function Jn(){return(Jn=Sn(vn().mark((function t(n){var e,r;return vn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tn();case 2:return e=t.sent,(r=e.transaction(_n,"readwrite")).objectStore(_n).put(n),t.next=8,new Promise((function(t,n){r.oncomplete=function(){return t()},r.onerror=function(){return n(r.error)}}));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Vn(){return $n.apply(this,arguments)}function $n(){return($n=Sn(vn().mark((function t(){var n,e,r;return vn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tn();case 2:return n=t.sent,e=n.transaction(_n,"readonly"),r=e.objectStore(_n),t.abrupt("return",new Promise((function(t,n){var e=r.getAll();e.onsuccess=function(){return t(e.result||[])},e.onerror=function(){return n(e.error)}})));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Zn(t){return Qn.apply(this,arguments)}function Qn(){return(Qn=Sn(vn().mark((function t(n){var e,r;return vn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tn();case 2:return e=t.sent,(r=e.transaction(_n,"readwrite")).objectStore(_n).delete(n),t.next=8,new Promise((function(t,n){r.oncomplete=function(){return t()},r.onerror=function(){return n(r.error)}}));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Xn(t){return Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xn(t)}function te(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return ne(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?ne(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw i}}}}function ne(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function ee(){var t=ce(),n=t.m(ee),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,re(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(ee=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new fe(t,n)},AsyncIterator:ue,async:function(t,n,e,o,a){return(r(n)?ae:ie)(i(t),n,e,o,a)},keys:oe,values:re}})()}function re(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Xn(t)+" is not iterable")}function oe(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function ie(t,n,e,r,o){var i=ae(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function ae(t,n,e,r,o){return new ue(ce().w(t,n,e,r),o||Promise)}function ue(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof fe?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(se(ue.prototype),se(ue.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),se(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function ce(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return se(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(se(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,se(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,se(l,"constructor",s),se(s,"constructor",c),c.displayName="GeneratorFunction",se(s,o,"GeneratorFunction"),se(l),se(l,o,"Generator"),se(l,r,(function(){return this})),se(l,"toString",(function(){return"[object Generator]"})),(ce=function(){return{w:i,m:p}})()}function se(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}se=function(t,n,e,r){function i(n,e){se(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},se(t,n,e,r)}function fe(t,n){this.v=t,this.k=n}function le(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function pe(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){le(i,r,o,a,u,"next",t)}function u(t){le(i,r,o,a,u,"throw",t)}a(void 0)}))}}function ve(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ye(r.key),r)}}function ye(t){var n=function(t){if("object"!=Xn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Xn(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Xn(n)?n:n+""}function he(t,n,e){de(t,n),n.set(t,e)}function de(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function me(t,n){return t.get(ge(t,n))}function be(t,n,e){return t.set(ge(t,n),e),e}function ge(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var we=new WeakMap,ke=new WeakMap,xe=new WeakMap,Se=new WeakSet,Oe=function(){return t=function t(){var n;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),de(this,n=Se),n.add(this),he(this,we,null),he(this,ke,null),he(this,xe,null)},n=[{key:"render",value:(r=pe(ee().mark((function t(){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n            <div class="main-content">\n                <div class="hero-section">'.concat('\n        <section class="hero-section--book-theme">\n            <div class="hero-section__content">\n                <h1 class="hero-section__title">Jelajahi Dunia Cerita</h1>\n                <p class="hero-section__subtitle">Temukan ribuan kisah fiksi dan non-fiksi terbaru di sini.</p>\n                <a href="#/add" class="hero-section__cta-button">Tulis Ceritamu!</a>\n            </div>\n        </section>\n    ','</div>\n\n                <h2 class="section-title">Lokasi dari para authors</h2>\n                <div class="map-container" style="height: 400px; margin-top: 40px;">\n                    <div id="map" style="width: 100%; height: 100%;"></div>\n                </div>\n                \n                <section class="container">\n                    <h2 class="section-title">Kisah Terbaru</h2>\n                    <div class="card-list__container">\n                        <div id="card-list" class="card-list">\n                            <div id="card-list-loading-container"></div>\n                        </div>\n                        <p id="error-message" style="color: red; display: none; text-align: center; margin-top: 20px;"></p>\n                    </div>\n                </section>\n            </div>\n        '));case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=pe(ee().mark((function t(){var n=this;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return be(we,this,new Bt({view:this,model:a})),be(ke,this,null),t.next=4,ge(Se,this,je).call(this);case 4:ge(Se,this,Pe).call(this),setTimeout((function(){return ge(Se,n,Te).call(n)}),300);case 6:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"displayStories",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=document.getElementById("card-list-loading-container"),e=document.getElementById("card-list"),r=document.getElementById("error-message");if(n&&(n.style.display="none"),r&&(r.style.display="none"),0!==t.length){var o="";t.forEach((function(t){o+=_(t)})),e&&(e.innerHTML=o),ge(Se,this,Ne).call(this,t)}else e&&(e.innerHTML='<p class="empty-state">Belum ada cerita yang tersedia saat ini.</p>')}},{key:"displayError",value:function(t){var n=document.getElementById("card-list-loading-container"),e=document.getElementById("card-list"),r=document.getElementById("error-message"),o=document.getElementById("load-more-button");n&&(n.style.display="none"),e&&(e.innerHTML=""),o&&(o.style.display="none"),r&&(r.textContent=t,r.style.display="block")}},{key:"showLoading",value:function(){var t=document.getElementById("card-list-loading-container");t&&(t.innerHTML=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,n="",e=0;e<t;e++)n+='<div class="skeleton-item"></div>';return n}(8),t.style.display="block")}},{key:"hideLoading",value:function(){var t=document.getElementById("card-list-loading-container");t&&(t.innerHTML="",t.style.display="none")}}],n&&ve(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function je(){return _e.apply(this,arguments)}function _e(){return(_e=pe(ee().mark((function t(){var n,e,r,o,i,a;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.showLoading(),t.prev=1,n=E()){t.next=11;break}return console.warn("No token, using cache"),t.next=7,Mn();case 7:return e=t.sent,this.displayStories(e),this.hideLoading(),t.abrupt("return");case 11:return t.next=13,fetch("https://story-api.dicoding.dev/v1/stories",{headers:{Authorization:"Bearer ".concat(n)}});case 13:if((r=t.sent).ok){t.next=16;break}throw new Error("HTTP error! status: ".concat(r.status));case 16:return t.next=18,r.json();case 18:return o=t.sent,console.log("API Response:",o),i=o.listStory||[],t.next=23,Un(i);case 23:this.displayStories(i),this.hideLoading(),t.next=37;break;case 27:return t.prev=27,t.t0=t.catch(1),console.error("Fetch error:",t.t0),console.warn("Ambil dari IndexedDB (offline mode)"),t.next=33,Mn();case 33:a=t.sent,this.displayStories(a),this.hideLoading(),0===a.length&&this.displayError("Tidak dapat memuat cerita. Periksa koneksi internet Anda.");case 37:case"end":return t.stop()}}),t,this,[[1,27]])})))).apply(this,arguments)}function Pe(){var t=this,n=document.getElementById("load-more-button");n&&(me(xe,this)&&n.removeEventListener("click",me(xe,this)),be(xe,this,pe(ee().mark((function n(){return ee().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,me(we,t).loadNextStories();case 2:case"end":return n.stop()}}),n)})))),n.addEventListener("click",me(xe,this)))}function Te(){return Ee.apply(this,arguments)}function Ee(){return(Ee=pe(ee().mark((function t(){var n,e,r,o;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=document.querySelectorAll(".bookmark-button")).length){t.next=3;break}return t.abrupt("return");case 3:e=te(n),t.prev=4,o=ee().mark((function t(){var n,e;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.value,e=n.dataset.id,t.next=4,Wn(e);case 4:t.sent&&n.classList.add("saved"),n.addEventListener("click",pe(ee().mark((function t(){var r;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={id:e,name:n.closest(".card-item").querySelector(".card-item__title").textContent,description:n.closest(".card-item").querySelector(".card-item__description").textContent,photoUrl:n.closest(".card-item").querySelector(".card-item__image").src},t.next=3,Rn(r);case 3:t.sent?n.classList.add("saved"):n.classList.remove("saved");case 5:case"end":return t.stop()}}),t)}))));case 7:case"end":return t.stop()}}),t)})),e.s();case 7:if((r=e.n()).done){t.next=11;break}return t.delegateYield(o(),"t0",9);case 9:t.next=7;break;case 11:t.next=16;break;case 13:t.prev=13,t.t1=t.catch(4),e.e(t.t1);case 16:return t.prev=16,e.f(),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[4,13,16,19]])})))).apply(this,arguments)}function Ne(t){if(t&&0!==t.length){var n=t.filter((function(t){return t.lat&&t.lon}));0!==n.length&&(me(ke,this)?ge(Se,this,Ge).call(this,n):ge(Se,this,Ie).call(this,n))}}function Ie(t){var n=this;if(void 0!==sn&&"function"==typeof sn.build){var e=t.reduce((function(t,n){return t+n.lat}),0)/t.length,r=t.reduce((function(t,n){return t+n.lon}),0)/t.length;sn.build("#map",{center:[e,r],zoom:5,locate:!1}).then((function(e){be(ke,n,e),ge(Se,n,Le).call(n,t)})).catch((function(t){console.error("Map setup error:",t);var n=document.getElementById("map");n&&(n.innerHTML='<p style="text-align:center; color:#999;">Peta gagal dimuat.</p>')}))}else{console.warn("Map library tidak tersedia");var o=document.getElementById("map");o&&(o.innerHTML='<p style="text-align:center; color:#999;">Map library belum tersedia.</p>')}}function Ge(t){if(me(ke,this)){var n=me(ke,this).getLeafletMap();n.eachLayer((function(t){t instanceof L.Marker&&n.removeLayer(t)})),ge(Se,this,Le).call(this,t)}}function Le(t){var n=this;if(me(ke,this)&&t&&0!==t.length){var e=[];if(t.forEach((function(t){if(t.lat&&t.lon)try{var r=me(ke,n).addMarker([t.lat,t.lon],{title:t.name||t.description||"Story",draggable:!1});if(r&&"function"==typeof r.bindPopup){var o='\n                            <div style="cursor: pointer;">\n                                <strong>'.concat(t.name||"Story","</strong>\n                                ").concat(t.description?"<br><small>".concat(t.description.substring(0,100),"...</small>"):"","\n                            </div>\n                        ");r.bindPopup(o)}r&&"function"==typeof r.on&&r.on("click",(function(){location.hash="#/stories/".concat(t.id)})),e.push([t.lat,t.lon])}catch(t){console.error("Error creating marker:",t)}})),e.length>0)try{me(ke,this).getLeafletMap().fitBounds(e,{padding:[50,50]})}catch(t){console.error("Error fitting bounds:",t)}}}function Fe(t){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fe(t)}function Me(){var t=He(),n=t.m(Me),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Ae(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Me=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Re(t,n)},AsyncIterator:De,async:function(t,n,e,o,a){return(r(n)?We:Ce)(i(t),n,e,o,a)},keys:Be,values:Ae}})()}function Ae(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Fe(t)+" is not iterable")}function Be(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Ce(t,n,e,r,o){var i=We(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function We(t,n,e,r,o){return new De(He().w(t,n,e,r),o||Promise)}function De(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Re?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(ze(De.prototype),ze(De.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),ze(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function He(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return ze(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(ze(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,ze(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,ze(l,"constructor",s),ze(s,"constructor",c),c.displayName="GeneratorFunction",ze(s,o,"GeneratorFunction"),ze(l),ze(l,o,"Generator"),ze(l,r,(function(){return this})),ze(l,"toString",(function(){return"[object Generator]"})),(He=function(){return{w:i,m:p}})()}function ze(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ze=function(t,n,e,r){function i(n,e){ze(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},ze(t,n,e,r)}function Re(t,n){this.v=t,this.k=n}function Ye(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Ue(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Ye(i,r,o,a,u,"next",t)}function u(t){Ye(i,r,o,a,u,"throw",t)}a(void 0)}))}}function qe(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ke(r.key),r)}}function Ke(t){var n=function(t){if("object"!=Fe(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Fe(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Fe(n)?n:n+""}var Je=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"render",value:(r=Ue(Me().mark((function t(){return Me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container about-page-content">\n        <h1 class="section-title">Tentang BukuKami</h1>\n        <article class="about-us-story">\n          <p>BukuKami adalah platform berbagi cerita digital yang memungkinkan Anda mengabadikan momen berharga, baik fiksi maupun non-fiksi. Setiap kisah dapat didokumentasikan dengan foto dan ditandai dengan lokasi spesifik menggunakan peta.</p>\n        </article>\n      </section>\n      \n      <style>\n        .about-page-content {\n          padding-top: 40px;\n          padding-bottom: 60px;\n        }\n        .about-us-story {\n          max-width: 800px;\n          line-height: 1.6;\n          font-size: 1.1rem;\n          margin-inline: auto;\n          text-align: center;\n        }\n      </style>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=Ue(Me().mark((function t(){return Me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}],n&&qe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function Ve(t){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(t)}function $e(){var t=er(),n=t.m($e),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Ze(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return($e=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new or(t,n)},AsyncIterator:nr,async:function(t,n,e,o,a){return(r(n)?tr:Xe)(i(t),n,e,o,a)},keys:Qe,values:Ze}})()}function Ze(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Ve(t)+" is not iterable")}function Qe(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Xe(t,n,e,r,o){var i=tr(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function tr(t,n,e,r,o){return new nr(er().w(t,n,e,r),o||Promise)}function nr(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof or?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(rr(nr.prototype),rr(nr.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),rr(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function er(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return rr(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(rr(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,rr(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,rr(l,"constructor",s),rr(s,"constructor",c),c.displayName="GeneratorFunction",rr(s,o,"GeneratorFunction"),rr(l),rr(l,o,"Generator"),rr(l,r,(function(){return this})),rr(l,"toString",(function(){return"[object Generator]"})),(er=function(){return{w:i,m:p}})()}function rr(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}rr=function(t,n,e,r){function i(n,e){rr(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},rr(t,n,e,r)}function or(t,n){this.v=t,this.k=n}function ir(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function ar(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ur(r.key),r)}}function ur(t){var n=function(t){if("object"!=Ve(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Ve(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ve(n)?n:n+""}function cr(t,n,e){(function(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,n),n.set(t,e)}function sr(t,n){return t.get(lr(t,n))}function fr(t,n,e){return t.set(lr(t,n),e),e}function lr(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var pr=new WeakMap,vr=new WeakMap,yr=function(){return t=function t(n){var e=n.view,r=n.model;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),cr(this,pr,void 0),cr(this,vr,void 0),fr(pr,this,e),fr(vr,this,r||a)},n=[{key:"getLogin",value:function(){var t,n=(t=$e().mark((function t(n){var e,r,o,i,a;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.email,r=n.password,sr(pr,this).showSubmitLoadingButton(),t.prev=2,t.next=5,sr(vr,this).getLogin({email:e,password:r});case 5:if((i=t.sent).ok){t.next=8;break}throw new Error(i.message||"Email atau password salah.");case 8:if(a=null===(o=i.loginResult)||void 0===o?void 0:o.token){t.next=11;break}throw new Error("Token tidak ditemukan dari server.");case 11:N(a),location.hash="/",sr(pr,this).loginSuccessfully("Login berhasil!",{token:a}),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(2),console.error("getLogin: error:",t.t0),sr(pr,this).loginFailed(t.t0.message);case 20:return t.prev=20,sr(pr,this).hideSubmitLoadingButton(),t.finish(20);case 23:case"end":return t.stop()}}),t,this,[[2,16,20,23]])})),function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){ir(i,r,o,a,u,"next",t)}function u(t){ir(i,r,o,a,u,"throw",t)}a(void 0)}))});return function(t){return n.apply(this,arguments)}}()}],n&&ar(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function hr(t){return hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hr(t)}function dr(){var t=xr(),n=t.m(dr),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,mr(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(dr=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Or(t,n)},AsyncIterator:kr,async:function(t,n,e,o,a){return(r(n)?wr:gr)(i(t),n,e,o,a)},keys:br,values:mr}})()}function mr(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(hr(t)+" is not iterable")}function br(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function gr(t,n,e,r,o){var i=wr(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function wr(t,n,e,r,o){return new kr(xr().w(t,n,e,r),o||Promise)}function kr(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Or?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Sr(kr.prototype),Sr(kr.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Sr(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function xr(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Sr(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Sr(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Sr(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Sr(l,"constructor",s),Sr(s,"constructor",c),c.displayName="GeneratorFunction",Sr(s,o,"GeneratorFunction"),Sr(l),Sr(l,o,"Generator"),Sr(l,r,(function(){return this})),Sr(l,"toString",(function(){return"[object Generator]"})),(xr=function(){return{w:i,m:p}})()}function Sr(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Sr=function(t,n,e,r){function i(n,e){Sr(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},Sr(t,n,e,r)}function Or(t,n){this.v=t,this.k=n}function jr(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function _r(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){jr(i,r,o,a,u,"next",t)}function u(t){jr(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Pr(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tr(r.key),r)}}function Tr(t){var n=function(t){if("object"!=hr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=hr(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==hr(n)?n:n+""}function Er(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Nr(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var Ir=new WeakMap,Gr=new WeakSet,Lr=function(){return t=function t(){var n;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),Er(this,n=Gr),n.add(this),function(t,n){Er(t,n),n.set(t,null)}(this,Ir)},n=[{key:"render",value:(r=_r(dr().mark((function t(){return dr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n            <section class="login-container">\n                <article class="login-form-container">\n                <h1 class="login__title">Masuk akun</h1>\n\n                <form id="login-form" class="login-form">\n                    <div class="form-control">\n                    <label for="email-input" class="login-form__email-title">Email</label>\n\n                    <div class="login-form__title-container">\n                        <input id="email-input" type="email" name="email" placeholder="Contoh: nama@email.com">\n                    </div>\n                    </div>\n                    <div class="form-control">\n                    <label for="password-input" class="login-form__password-title">Password</label>\n\n                    <div class="login-form__title-container">\n                        <input id="password-input" type="password" name="password" placeholder="Masukkan password Anda">\n                    </div>\n                    </div>\n                    <div class="form-buttons login-form__form-buttons">\n                    <div id="submit-button-container">\n                        <button class="btn" type="submit">Masuk</button>\n                    </div>\n                    <p class="login-form__do-not-have-account">Belum punya akun? <a href="#/register">Daftar</a></p>\n                    </div>\n                </form>\n            </article>\n            </section>\n        ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=_r(dr().mark((function t(){return dr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Ir,e=new yr({view:this,model:a,authModel:i}),n.set(Nr(n,this),e),Nr(Gr,this,Fr).call(this);case 2:case"end":return t.stop()}var n,e}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"loginSuccessfully",value:function(t){console.log(t),location.hash="/"}},{key:"loginFailed",value:function(t){alert(t)}},{key:"showSubmitLoadingButton",value:function(){document.getElementById("submit-button-container").innerHTML='\n        <button class="btn" type="submit" disabled>\n            <i class="fas fa-spinner loader-button"></i> Masuk\n        </button>\n    '}},{key:"hideSubmitLoadingButton",value:function(){document.getElementById("submit-button-container").innerHTML='\n            <button class="btn" type="submit">Masuk</button>\n    '}}],n&&Pr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function Fr(){var t=this;document.getElementById("login-form").addEventListener("submit",function(){var n=_r(dr().mark((function n(e){var r;return dr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),r={email:document.getElementById("email-input").value,password:document.getElementById("password-input").value},n.next=4,(o=Ir,i=t,o.get(Nr(o,i))).getLogin(r);case 4:case"end":return n.stop()}var o,i}),n)})));return function(t){return n.apply(this,arguments)}}())}function Mr(t){return Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mr(t)}function Ar(){var t=zr(),n=t.m(Ar),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Br(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Ar=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Yr(t,n)},AsyncIterator:Hr,async:function(t,n,e,o,a){return(r(n)?Dr:Wr)(i(t),n,e,o,a)},keys:Cr,values:Br}})()}function Br(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Mr(t)+" is not iterable")}function Cr(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Wr(t,n,e,r,o){var i=Dr(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Dr(t,n,e,r,o){return new Hr(zr().w(t,n,e,r),o||Promise)}function Hr(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Yr?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Rr(Hr.prototype),Rr(Hr.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Rr(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function zr(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Rr(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Rr(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Rr(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Rr(l,"constructor",s),Rr(s,"constructor",c),c.displayName="GeneratorFunction",Rr(s,o,"GeneratorFunction"),Rr(l),Rr(l,o,"Generator"),Rr(l,r,(function(){return this})),Rr(l,"toString",(function(){return"[object Generator]"})),(zr=function(){return{w:i,m:p}})()}function Rr(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Rr=function(t,n,e,r){function i(n,e){Rr(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},Rr(t,n,e,r)}function Yr(t,n){this.v=t,this.k=n}function Ur(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function qr(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kr(r.key),r)}}function Kr(t){var n=function(t){if("object"!=Mr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Mr(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mr(n)?n:n+""}function Jr(t,n,e){(function(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,n),n.set(t,e)}function Vr(t,n){return t.get(Zr(t,n))}function $r(t,n,e){return t.set(Zr(t,n),e),e}function Zr(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var Qr=new WeakMap,Xr=new WeakMap,to=function(){return t=function t(n){var e=n.view,r=n.model;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),Jr(this,Qr,void 0),Jr(this,Xr,void 0),$r(Qr,this,e),$r(Xr,this,r)},n=[{key:"getRegistered",value:function(){var t,n=(t=Ar().mark((function t(n){var e,r,o,i;return Ar().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.name,r=n.email,o=n.password,Vr(Qr,this).showSubmitLoadingButton(),t.prev=2,t.next=5,Vr(Xr,this).getRegistered({name:e,email:r,password:o});case 5:if((i=t.sent).ok){t.next=10;break}return console.error("getRegistered: response:",i),Vr(Qr,this).registeredFailed(i.message),t.abrupt("return");case 10:Vr(Qr,this).registeredSuccessfully(i.message,i.data),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),console.error("getRegistered: error:",t.t0),Vr(Qr,this).registeredFailed(t.t0.message);case 17:return t.prev=17,Vr(Qr,this).hideSubmitLoadingButton(),t.finish(17);case 20:case"end":return t.stop()}}),t,this,[[2,13,17,20]])})),function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Ur(i,r,o,a,u,"next",t)}function u(t){Ur(i,r,o,a,u,"throw",t)}a(void 0)}))});return function(t){return n.apply(this,arguments)}}()}],n&&qr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function no(t){return no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},no(t)}function eo(){var t=co(),n=t.m(eo),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,ro(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(eo=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new fo(t,n)},AsyncIterator:uo,async:function(t,n,e,o,a){return(r(n)?ao:io)(i(t),n,e,o,a)},keys:oo,values:ro}})()}function ro(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(no(t)+" is not iterable")}function oo(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function io(t,n,e,r,o){var i=ao(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function ao(t,n,e,r,o){return new uo(co().w(t,n,e,r),o||Promise)}function uo(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof fo?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(so(uo.prototype),so(uo.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),so(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function co(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return so(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(so(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,so(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,so(l,"constructor",s),so(s,"constructor",c),c.displayName="GeneratorFunction",so(s,o,"GeneratorFunction"),so(l),so(l,o,"Generator"),so(l,r,(function(){return this})),so(l,"toString",(function(){return"[object Generator]"})),(co=function(){return{w:i,m:p}})()}function so(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}so=function(t,n,e,r){function i(n,e){so(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},so(t,n,e,r)}function fo(t,n){this.v=t,this.k=n}function lo(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function po(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){lo(i,r,o,a,u,"next",t)}function u(t){lo(i,r,o,a,u,"throw",t)}a(void 0)}))}}function vo(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yo(r.key),r)}}function yo(t){var n=function(t){if("object"!=no(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=no(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==no(n)?n:n+""}function ho(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function mo(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var bo=new WeakMap,go=new WeakSet,wo=function(){return t=function t(){var n;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),ho(this,n=go),n.add(this),function(t,n){ho(t,n),n.set(t,null)}(this,bo)},n=[{key:"render",value:(r=po(eo().mark((function t(){return eo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="register-container">\n            <div class="register-form-container">\n                <h1 class="register__title">Daftar akun</h1>\n\n                <form id="register-form" class="register-form">\n                <div class="form-control">\n                    <label for="name-input" class="register-form__name-title">Nama lengkap</label>\n                    <div class="register-form__title-container">\n                        <input id="name-input" type="text" name="name" placeholder="Masukkan nama lengkap Anda">\n                    </div>\n                </div>\n                <div class="form-control">\n                    <label for="email-input" class="register-form__email-title">Email</label>\n\n                    <div class="register-form__title-container">\n                        <input id="email-input" type="email" name="email" placeholder="Contoh: nama@email.com">\n                    </div>\n                </div>\n                <div class="form-control">\n                    <label for="password-input" class="register-form__password-title">Password</label>\n\n                    <div class="register-form__title-container">\n                        <input id="password-input" type="password" name="password" placeholder="Masukkan password baru">\n                    </div>\n                </div>\n                <div class="form-buttons register-form__form-buttons">\n                    <div id="submit-button-container">\n                        <button class="btn" type="submit">Daftar akun</button>\n                    </div>\n                    <p class="register-form__already-have-account">Sudah punya akun? <a href="#/login">Masuk</a></p>\n                </div>\n                </form>\n            </div>\n        </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=po(eo().mark((function t(){return eo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=bo,e=new to({view:this,model:a}),n.set(mo(n,this),e),mo(go,this,ko).call(this);case 2:case"end":return t.stop()}var n,e}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"registeredSuccessfully",value:function(t){console.log(t),location.hash="/login"}},{key:"registeredFailed",value:function(t){alert(t)}},{key:"showSubmitLoadingButton",value:function(){document.getElementById("submit-button-container").innerHTML='\n      <button class="btn" type="submit" disabled>\n        <i class="fas fa-spinner loader-button"></i> Daftar akun\n      </button>\n    '}},{key:"hideSubmitLoadingButton",value:function(){document.getElementById("submit-button-container").innerHTML='\n      <button class="btn" type="submit">Daftar akun</button>\n    '}}],n&&vo(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function ko(){var t=this;document.getElementById("register-form").addEventListener("submit",function(){var n=po(eo().mark((function n(e){var r;return eo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.preventDefault(),r={name:document.getElementById("name-input").value,email:document.getElementById("email-input").value,password:document.getElementById("password-input").value},(o=bo,i=t,o.get(mo(o,i))).getRegistered(r);case 3:case"end":return n.stop()}var o,i}),n)})));return function(t){return n.apply(this,arguments)}}())}function xo(t){return xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xo(t)}function So(){var t=Eo(),n=t.m(So),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Oo(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(So=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Io(t,n)},AsyncIterator:To,async:function(t,n,e,o,a){return(r(n)?Po:_o)(i(t),n,e,o,a)},keys:jo,values:Oo}})()}function Oo(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(xo(t)+" is not iterable")}function jo(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function _o(t,n,e,r,o){var i=Po(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Po(t,n,e,r,o){return new To(Eo().w(t,n,e,r),o||Promise)}function To(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Io?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(No(To.prototype),No(To.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),No(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Eo(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return No(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(No(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,No(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,No(l,"constructor",s),No(s,"constructor",c),c.displayName="GeneratorFunction",No(s,o,"GeneratorFunction"),No(l),No(l,o,"Generator"),No(l,r,(function(){return this})),No(l,"toString",(function(){return"[object Generator]"})),(Eo=function(){return{w:i,m:p}})()}function No(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}No=function(t,n,e,r){function i(n,e){No(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},No(t,n,e,r)}function Io(t,n){this.v=t,this.k=n}function Go(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Lo(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fo(r.key),r)}}function Fo(t){var n=function(t){if("object"!=xo(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=xo(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xo(n)?n:n+""}function Mo(t,n,e){(function(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,n),n.set(t,e)}function Ao(t,n){return t.get(Bo(t,n))}function Bo(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var Co=new WeakMap,Wo=new WeakMap,Do=function(){return t=function t(n){var e,r,o=n.view,i=n.model;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),Mo(this,Co,void 0),Mo(this,Wo,void 0),r=o,(e=Co).set(Bo(e,this),r),this._model=i},n=[{key:"storeStory",value:(e=So().mark((function t(n){var e,r,o,i,a;return So().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.description,r=n.photo,o=n.lat,i=n.lon,e&&r){t.next=4;break}return Ao(Co,this).displayError("Deskripsi dan foto tidak boleh kosong."),t.abrupt("return");case 4:return Ao(Co,this).showSubmitLoadingButton(),t.prev=5,t.next=8,this._model.storeNewStory({description:e,photo:r,lat:o,lon:i});case 8:if((a=t.sent).ok){t.next=11;break}throw new Error(a.message||"Gagal menyimpan cerita baru.");case 11:Ao(Co,this).storyStoredSuccessfully(a.message||"Cerita berhasil ditambahkan!"),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(5),console.error("Error storing story:",t.t0),Ao(Co,this).displayError(t.t0.message||"Terjadi kesalahan saat menyimpan data.");case 18:return t.prev=18,Ao(Co,this).hideSubmitLoadingButton(),t.finish(18);case 21:case"end":return t.stop()}}),t,this,[[5,14,18,21]])})),r=function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(t){Go(i,r,o,a,u,"next",t)}function u(t){Go(i,r,o,a,u,"throw",t)}a(void 0)}))},function(t){return r.apply(this,arguments)})}],n&&Lo(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function Ho(t){return Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ho(t)}function zo(){var t=Jo(),n=t.m(zo),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Ro(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(zo=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new $o(t,n)},AsyncIterator:Ko,async:function(t,n,e,o,a){return(r(n)?qo:Uo)(i(t),n,e,o,a)},keys:Yo,values:Ro}})()}function Ro(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Ho(t)+" is not iterable")}function Yo(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Uo(t,n,e,r,o){var i=qo(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function qo(t,n,e,r,o){return new Ko(Jo().w(t,n,e,r),o||Promise)}function Ko(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof $o?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Vo(Ko.prototype),Vo(Ko.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Vo(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Jo(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Vo(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Vo(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Vo(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Vo(l,"constructor",s),Vo(s,"constructor",c),c.displayName="GeneratorFunction",Vo(s,o,"GeneratorFunction"),Vo(l),Vo(l,o,"Generator"),Vo(l,r,(function(){return this})),Vo(l,"toString",(function(){return"[object Generator]"})),(Jo=function(){return{w:i,m:p}})()}function Vo(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Vo=function(t,n,e,r){function i(n,e){Vo(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},Vo(t,n,e,r)}function $o(t,n){this.v=t,this.k=n}function Zo(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Qo(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Zo(i,r,o,a,u,"next",t)}function u(t){Zo(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Xo(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ti(r.key),r)}}function ti(t){var n=function(t){if("object"!=Ho(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Ho(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ho(n)?n:n+""}function ni(t,n,e){ei(t,n),n.set(t,e)}function ei(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ri(t,n){return t.get(ii(t,n))}function oi(t,n,e){return t.set(ii(t,n),e),e}function ii(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var ai=new WeakMap,ui=new WeakMap,ci=new WeakMap,si=new WeakMap,fi=new WeakSet,li=function(){return t=function t(n){var e,r=n.video,o=n.canvas,i=n.cameraSelect;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),ei(this,e=fi),e.add(this),ni(this,ai,void 0),ni(this,ui,void 0),ni(this,ci,void 0),ni(this,si,void 0),oi(ai,this,r),oi(ui,this,o),oi(ci,this,i),oi(si,this,null),ii(fi,this,pi).call(this)},n=[{key:"launch",value:(e=Qo(zo().mark((function t(){var n,e;return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.stop(),n=ri(ci,this).value,e={video:{deviceId:n?{exact:n}:void 0,facingMode:"environment"}},t.prev=3,t.t0=oi,t.t1=si,t.t2=this,t.next=9,navigator.mediaDevices.getUserMedia(e);case 9:t.t3=t.sent,(0,t.t0)(t.t1,t.t2,t.t3),ri(ai,this).srcObject=ri(si,this),ri(ai,this).play(),t.next=19;break;case 15:t.prev=15,t.t4=t.catch(3),console.error("Error accessing camera:",t.t4),alert("Gagal mengakses kamera. Pastikan izin kamera sudah diberikan.");case 19:case"end":return t.stop()}}),t,this,[[3,15]])}))),function(){return e.apply(this,arguments)})},{key:"stop",value:function(){ri(si,this)&&(ri(si,this).getTracks().forEach((function(t){return t.stop()})),oi(si,this,null))}},{key:"takePicture",value:function(){var t=this;return ri(si,this)?(ri(ui,this).width=ri(ai,this).videoWidth,ri(ui,this).height=ri(ai,this).videoHeight,ri(ui,this).getContext("2d").drawImage(ri(ai,this),0,0,ri(ui,this).width,ri(ui,this).height),new Promise((function(n){ri(ui,t).toBlob((function(t){n(t)}),"image/png")}))):Promise.reject(new Error("Kamera belum diluncurkan."))}},{key:"addCheeseButtonListener",value:function(t,n){document.querySelector(t).addEventListener("click",n)}}],n&&Xo(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e}();function pi(){return vi.apply(this,arguments)}function vi(){return(vi=Qo(zo().mark((function t(){var n,e,r=this;return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ri(ci,this).addEventListener("change",(function(){return r.launch()})),t.next=3,navigator.mediaDevices.enumerateDevices();case 3:if(n=t.sent,0!==(e=n.filter((function(t){return"videoinput"===t.kind}))).length){t.next=8;break}return console.warn("No video input devices found."),t.abrupt("return");case 8:e.forEach((function(t){var n=document.createElement("option");n.value=t.deviceId,n.text=t.label||"Camera ".concat(ri(ci,r).length+1),ri(ci,r).appendChild(n)}));case 9:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function yi(t){return yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yi(t)}function hi(){var t=ki(),n=t.m(hi),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,di(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(hi=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Si(t,n)},AsyncIterator:wi,async:function(t,n,e,o,a){return(r(n)?gi:bi)(i(t),n,e,o,a)},keys:mi,values:di}})()}function di(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(yi(t)+" is not iterable")}function mi(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function bi(t,n,e,r,o){var i=gi(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function gi(t,n,e,r,o){return new wi(ki().w(t,n,e,r),o||Promise)}function wi(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Si?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(xi(wi.prototype),xi(wi.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),xi(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function ki(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return xi(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(xi(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,xi(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,xi(l,"constructor",s),xi(s,"constructor",c),c.displayName="GeneratorFunction",xi(s,o,"GeneratorFunction"),xi(l),xi(l,o,"Generator"),xi(l,r,(function(){return this})),xi(l,"toString",(function(){return"[object Generator]"})),(ki=function(){return{w:i,m:p}})()}function xi(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}xi=function(t,n,e,r){function i(n,e){xi(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},xi(t,n,e,r)}function Si(t,n){this.v=t,this.k=n}function Oi(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function ji(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Oi(i,r,o,a,u,"next",t)}function u(t){Oi(i,r,o,a,u,"throw",t)}a(void 0)}))}}function _i(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pi(r.key),r)}}function Pi(t){var n=function(t){if("object"!=yi(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=yi(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yi(n)?n:n+""}function Ti(t,n,e){Ei(t,n),n.set(t,e)}function Ei(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ni(t,n){return t.get(Gi(t,n))}function Ii(t,n,e){return t.set(Gi(t,n),e),e}function Gi(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var Li=new WeakMap,Fi=new WeakMap,Mi=new WeakMap,Ai=new WeakMap,Bi=new WeakMap,Ci=new WeakMap,Wi=new WeakSet,Di=function(){return t=function t(){var n;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),Ei(this,n=Wi),n.add(this),Ti(this,Li,void 0),Ti(this,Fi,void 0),Ti(this,Mi,void 0),Ti(this,Ai,!1),Ti(this,Bi,[]),Ti(this,Ci,null)},n=[{key:"render",value:(r=ji(hi().mark((function t(){return hi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container">\n        <h1 class="section-title">Bagikan Ceritamu</h1>\n        <div class="new-form__container">\n          <form id="add-story-form" class="new-form">\n            \n            <div class="form-control description">\n              <label for="description-input" class="new-form__description__title">Deskripsi Cerita</label>\n              <textarea id="description-input" name="description" placeholder="Tuliskan deskripsi cerita Anda..." rows="6" required></textarea>\n            </div>\n\n            <div class="form-control">\n              <label for="documentations-input" class="new-form__documentations__title">Dokumentasi Foto</label>\n  \n              <div class="new-form__documentations__container">\n                <div class="new-form__documentations__buttons">\n                  <button id="documentations-input-button" class="btn btn-outline" type="button">\n                    Pilih Foto (Galeri)\n                  </button>\n                  <input\n                    id="documentations-input"\n                    name="documentations"\n                    type="file"\n                    accept="image/*"\n                    hidden="hidden"\n                    aria-describedby="documentations-more-info"\n                  >\n                  <button id="open-documentations-camera-button" class="btn btn-outline" type="button">\n                    Buka Kamera\n                  </button>\n                </div>\n                \n                <div id="camera-container" class="new-form__camera__container" style="display: none; margin-top: 15px;">\n                  <video id="camera-video" class="new-form__camera__video" style="width: 100%; max-width: 640px; height: auto; background: #000; border-radius: 8px;">\n                    Video stream not available.\n                  </video>\n                  <canvas id="camera-canvas" class="new-form__camera__canvas" style="display: none;"></canvas>\n  \n                  <div class="new-form__camera__tools" style="margin-top: 10px; display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">\n                    <select id="camera-select" style="flex: 1; min-width: 200px; padding: 8px; border-radius: 4px; border: 1px solid #ccc;"></select>\n                    <div class="new-form__camera__tools_buttons">\n                      <button id="camera-take-button" class="btn" type="button">\n                        Ambil Gambar\n                      </button>\n                    </div>\n                  </div>\n                </div>\n                <div id="documentation-output" class="new-form__documentations__output"></div>\n              </div>\n            </div>\n\n            <div class="form-control">\n              <div class="new-form__location__title">Lokasi Anda</div>\n  \n              <div class="new-form__location__container">\n                <div class="new-form__location__map__container">\n                  <div id="map" class="new-form__location__map" style="height: 300px; display: block;"></div>\n                  <div id="map-loading-container"></div>\n                </div>\n                <div class="new-form__location__lat-lng">\n                  <input type="hidden" name="latitude" id="latitude-input" value="">\n                  <input type="hidden" name="longitude" id="longitude-input" value="">\n                  <p class="map-hint" id="coordinate-display">Koordinat: Klik pada peta untuk menandai.</p>\n                </div>\n              </div>\n            </div>\n\n            <p id="error-message" style="color: red; margin-bottom: 15px; display: none;"></p>\n\n            <div class="form-buttons">\n              <a class="btn submit-button-container" href="#/">Batal</a>\n              <button id="submit-button-container" class="btn" type="submit">Unggah Cerita</button>\n            </div>\n          </form>\n        </div>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=ji(hi().mark((function t(){return hi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ii(Li,this,new Do({view:this,model:a})),Ii(Bi,this,[]),Gi(Wi,this,Ui).call(this),t.next=5,new Promise((function(t){return setTimeout(t,100)}));case 5:return t.next=7,Gi(Wi,this,Hi).call(this);case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"showMapLoading",value:function(){document.getElementById("map-loading-container").innerHTML='\n        <div class="loader"></div>\n    '}},{key:"hideMapLoading",value:function(){document.getElementById("map-loading-container").innerHTML=""}},{key:"showSubmitLoadingButton",value:function(){document.getElementById("submit-button-container").innerHTML='\n      <button class="btn" type="submit" disabled>\n        <i class="fas fa-spinner loader-button"></i> Unggah Cerita\n      </button>\n    '}},{key:"hideSubmitLoadingButton",value:function(){document.getElementById("submit-button-container").innerHTML='\n      <button class="btn" type="submit">Unggah Cerita</button>\n    '}},{key:"displayError",value:function(t){var n=document.getElementById("error-message");n.textContent=t,n.style.display="block"}},{key:"storyStoredSuccessfully",value:function(t){alert(t),this.clearForm(),location.hash="/"}},{key:"clearForm",value:function(){Ni(Fi,this).reset(),Ii(Bi,this,[]),document.getElementById("documentation-output").innerHTML=""}}],n&&_i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function Hi(){return zi.apply(this,arguments)}function zi(){return(zi=ji(hi().mark((function t(){var n,e,r,o,i=this;return hi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.showMapLoading(),n=function(){return new Promise((function(t,n){var e=0,r=function(){e++;var o=document.getElementById("map");o&&o.offsetHeight>0&&o.offsetWidth>0?(console.log("Map container ready:",o.offsetHeight,"x",o.offsetWidth),t(o)):e>=50?n(new Error("Map container timeout")):requestAnimationFrame(r)};r()}))},t.prev=2,t.next=5,n();case 5:return t.t0=Ii,t.t1=Ci,t.t2=this,t.next=10,sn.build("#map",{zoom:15,locate:!0});case 10:if(t.t3=t.sent,(0,t.t0)(t.t1,t.t2,t.t3),Ni(Ci,this)){t.next=14;break}throw new Error("Peta gagal dimuat.");case 14:this.hideMapLoading(),e=Ni(Ci,this).getCenter(),Gi(Wi,this,Ri).call(this,e.lat,e.lng),(r=Ni(Ci,this).getSingleMarker())&&r.on("dragend",(function(t){var n=t.target.getLatLng();Gi(Wi,i,Ri).call(i,n.lat,n.lng)})),Ni(Ci,this).addMapEventListener("click",(function(t){var n=t.latlng||t;(r=Ni(Ci,i).getSingleMarker())?r.setLatLng(n):(r=Ni(Ci,i).createMarker(n,{draggable:!0})).on("dragend",(function(t){var n=t.target.getLatLng();Gi(Wi,i,Ri).call(i,n.lat,n.lng)})),Gi(Wi,i,Ri).call(i,n.lat,n.lng)})),t.next=28;break;case 22:t.prev=22,t.t4=t.catch(2),console.error("Map error:",t.t4),this.hideMapLoading(),(o=document.getElementById("map"))&&(o.innerHTML='\n        <div style="padding:20px; text-align:center; color:#999; font-size:14px;">\n          <p>Peta tidak dapat dimuat.</p>\n          <p style="font-size:12px;">'.concat(t.t4.message,"</p>\n        </div>\n      "));case 28:Gi(Wi,this,Yi).call(this);case 29:case"end":return t.stop()}}),t,this,[[2,22]])})))).apply(this,arguments)}function Ri(t,n){document.getElementById("latitude-input").value=t,document.getElementById("longitude-input").value=n,document.getElementById("coordinate-display").textContent="Koordinat: ".concat(t.toFixed(6),", ").concat(n.toFixed(6))}function Yi(){var t=this;Ni(Mi,this)||Ii(Mi,this,new li({video:document.getElementById("camera-video"),cameraSelect:document.getElementById("camera-select"),canvas:document.getElementById("camera-canvas")})),Ni(Mi,this).addCheeseButtonListener("#camera-take-button",ji(hi().mark((function n(){var e;return hi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ni(Mi,t).takePicture();case 2:e=n.sent,Gi(Wi,t,Ji).call(t,e);case 4:case"end":return n.stop()}}),n)}))))}function Ui(){var t=this;Ii(Fi,this,document.getElementById("add-story-form")),Ni(Fi,this).addEventListener("submit",function(){var n=ji(hi().mark((function n(e){var r,o,i;return hi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),r=Ni(Fi,t).elements.namedItem("latitude").value,o=Ni(Fi,t).elements.namedItem("longitude").value,i={description:Ni(Fi,t).elements.namedItem("description").value,photo:Ni(Bi,t)[0]?Ni(Bi,t)[0].blob:null,lat:""===r?null:r,lon:""===o?null:o},n.prev=4,n.next=7,Ni(Li,t).storeStory(i);case 7:n.next=15;break;case 9:return n.prev=9,n.t0=n.catch(4),console.error("Error storing story:",n.t0),n.next=14,Kn(i);case 14:alert("Kamu sedang offline. Cerita akan dikirim otomatis saat online.");case 15:case"end":return n.stop()}}),n,null,[[4,9]])})));return function(t){return n.apply(this,arguments)}}()),document.getElementById("documentations-input").addEventListener("change",function(){var n=ji(hi().mark((function n(e){var r;return hi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=e.target.files[0])){n.next=4;break}return n.next=4,Gi(Wi,t,qi).call(t,r);case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()),document.getElementById("documentations-input-button").addEventListener("click",(function(){Ni(Fi,t).elements.namedItem("documentations").click()}));var n=document.getElementById("camera-container");document.getElementById("open-documentations-camera-button").addEventListener("click",function(){var e=ji(hi().mark((function e(r){return hi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("block"===n.style.display){e.next=18;break}if(n.style.display="block",r.currentTarget.textContent="Tutup Kamera",!Ni(Mi,t)){e.next=16;break}return e.prev=5,e.next=8,Ni(Mi,t).launch();case 8:e.next=16;break;case 10:e.prev=10,e.t0=e.catch(5),console.error("Camera launch error:",e.t0),alert("Tidak dapat mengakses kamera. Pastikan izin kamera telah diberikan."),n.style.display="none",r.currentTarget.textContent="Buka Kamera";case 16:e.next=21;break;case 18:n.style.display="none",r.currentTarget.textContent="Buka Kamera",Ni(Mi,t)&&Ni(Mi,t).stop();case 21:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}())}function qi(t){return Ki.apply(this,arguments)}function Ki(){return(Ki=ji(hi().mark((function t(n){var e;return hi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n,!(n instanceof String)){t.next=5;break}return t.next=4,k(n,"image/png");case 4:e=t.sent;case 5:Gi(Wi,this,Ji).call(this,e);case 6:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Ji(t){var n=this;Ii(Bi,this,[{id:"main",blob:t}]);var e=URL.createObjectURL(t);document.getElementById("documentation-output").innerHTML='\n        <div class="new-form__documentations__outputs-item">\n          <button type="button" data-deletepictureid="main" class="new-form__documentations__outputs-item__delete-btn">\n            <img src="'.concat(e,'" alt="Dokumentasi utama">\n          </button>\n        </div>\n    '),document.querySelector("button[data-deletepictureid]").addEventListener("click",(function(){Ii(Bi,n,[]),document.getElementById("documentation-output").innerHTML="",document.getElementById("documentations-input").value=""}))}function Vi(t){return Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vi(t)}function $i(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return Zi(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Zi(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw i}}}}function Zi(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function Qi(){var t=oa(),n=t.m(Qi),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Xi(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Qi=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new aa(t,n)},AsyncIterator:ra,async:function(t,n,e,o,a){return(r(n)?ea:na)(i(t),n,e,o,a)},keys:ta,values:Xi}})()}function Xi(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Vi(t)+" is not iterable")}function ta(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function na(t,n,e,r,o){var i=ea(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function ea(t,n,e,r,o){return new ra(oa().w(t,n,e,r),o||Promise)}function ra(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof aa?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(ia(ra.prototype),ia(ra.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),ia(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function oa(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return ia(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(ia(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,ia(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,ia(l,"constructor",s),ia(s,"constructor",c),c.displayName="GeneratorFunction",ia(s,o,"GeneratorFunction"),ia(l),ia(l,o,"Generator"),ia(l,r,(function(){return this})),ia(l,"toString",(function(){return"[object Generator]"})),(oa=function(){return{w:i,m:p}})()}function ia(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ia=function(t,n,e,r){function i(n,e){ia(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},ia(t,n,e,r)}function aa(t,n){this.v=t,this.k=n}function ua(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function ca(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){ua(i,r,o,a,u,"next",t)}function u(t){ua(i,r,o,a,u,"throw",t)}a(void 0)}))}}function sa(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fa(r.key),r)}}function fa(t){var n=function(t){if("object"!=Vi(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Vi(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Vi(n)?n:n+""}function la(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var pa=new WeakSet,va=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,n){(function(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,n),n.add(t)}(this,pa)},n=[{key:"render",value:(r=ca(Qi().mark((function t(){return Qi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <div class="main-content">\n        <section class="container">\n          <h2 class="section-title">Bookmark Saya</h2>\n          <div id="bookmark-list" class="card-list"></div>\n          <p id="empty-bookmark" class="empty-state hidden">\n            Belum ada cerita yang dibookmark.\n          </p>\n        </section>\n      </div>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=ca(Qi().mark((function t(){var n,e,r;return Qi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Mn();case 2:if(n=t.sent,e=document.getElementById("bookmark-list"),r=document.getElementById("empty-bookmark"),n&&0!==n.length){t.next=8;break}return r.classList.remove("hidden"),t.abrupt("return");case 8:e.innerHTML=n.map((function(t){return _(t)})).join(""),la(pa,this,ya).call(this);case 10:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}],n&&sa(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function ya(){return ha.apply(this,arguments)}function ha(){return(ha=ca(Qi().mark((function t(){var n,e,r,o;return Qi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=document.querySelectorAll(".bookmark-button"),e=$i(n),t.prev=2,o=Qi().mark((function t(){var n;return Qi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=r.value).textContent="Hapus",n.classList.add("saved"),n.addEventListener("click",ca(Qi().mark((function t(){var e,r;return Qi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.dataset.id,t.next=3,Hn(e);case 3:(r=n.closest(".card-item"))&&r.remove(),0===document.querySelectorAll(".card-item").length&&document.getElementById("empty-bookmark").classList.remove("hidden");case 7:case"end":return t.stop()}}),t)}))));case 4:case"end":return t.stop()}}),t)})),e.s();case 5:if((r=e.n()).done){t.next=9;break}return t.delegateYield(o(),"t0",7);case 7:t.next=5;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(2),e.e(t.t1);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})))).apply(this,arguments)}const da={"/":new Oe,"/about":new Je,"/login":new Lr,"/register":new wo,"/add":new Di,"/bookmark":new va};function ma(t){return ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ma(t)}function ba(){var t=Oa(),n=t.m(ba),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,ga(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(ba=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new _a(t,n)},AsyncIterator:Sa,async:function(t,n,e,o,a){return(r(n)?xa:ka)(i(t),n,e,o,a)},keys:wa,values:ga}})()}function ga(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(ma(t)+" is not iterable")}function wa(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function ka(t,n,e,r,o){var i=xa(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function xa(t,n,e,r,o){return new Sa(Oa().w(t,n,e,r),o||Promise)}function Sa(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof _a?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(ja(Sa.prototype),ja(Sa.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),ja(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Oa(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return ja(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(ja(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,ja(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,ja(l,"constructor",s),ja(s,"constructor",c),c.displayName="GeneratorFunction",ja(s,o,"GeneratorFunction"),ja(l),ja(l,o,"Generator"),ja(l,r,(function(){return this})),ja(l,"toString",(function(){return"[object Generator]"})),(Oa=function(){return{w:i,m:p}})()}function ja(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ja=function(t,n,e,r){function i(n,e){ja(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},ja(t,n,e,r)}function _a(t,n){this.v=t,this.k=n}function Pa(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Ta(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Pa(i,r,o,a,u,"next",t)}function u(t){Pa(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Ea(){return Na.apply(this,arguments)}function Na(){return(Na=Ta(ba().mark((function t(){return ba().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Notification"in window){t.next=3;break}return console.error("Tidak support Notification API"),t.abrupt("return",!1);case 3:if("granted"!==Notification.permission){t.next=5;break}return t.abrupt("return",!0);case 5:return t.next=7,Notification.requestPermission();case 7:if("granted"===t.sent){t.next=11;break}return alert("Izin notifikasi ditolak atau diabaikan."),t.abrupt("return",!1);case 11:return t.abrupt("return",!0);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ia(){return Ga.apply(this,arguments)}function Ga(){return(Ga=Ta(ba().mark((function t(){var n,e;return ba().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.serviceWorker.getRegistration();case 2:return e=t.sent,t.next=5,null==e||null===(n=e.pushManager)||void 0===n?void 0:n.getSubscription();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function La(){return Fa.apply(this,arguments)}function Fa(){return(Fa=Ta(ba().mark((function t(){return ba().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ia();case 2:return t.abrupt("return",!!t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ma(){return Aa.apply(this,arguments)}function Aa(){return(Aa=Ta(ba().mark((function t(){var n,e,r,o;return ba().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ea();case 3:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,navigator.serviceWorker.ready;case 8:return n=t.sent,t.next=11,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:x("BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk")});case 11:return e=t.sent,r=e.toJSON(),t.prev=13,t.next=16,En(r);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(13),console.warn("Gagal save ke IndexedDB:",t.t0);case 21:return t.next=23,at(r);case 23:localStorage.setItem("isSubscribed","true"),o=n.active||n.waiting||n.installing,"granted"===Notification.permission&&(null==o||o.postMessage({type:"SHOW_NOTIFICATION",title:"Notifikasi diaktifkan",body:"Success to subscribe web push notification."})),alert("Success to subscribe web push notification."),Da(6e4),console.log("Subscribe berhasil"),t.next=35;break;case 31:t.prev=31,t.t1=t.catch(0),console.error("Subscribe gagal:",t.t1),alert("Gagal berlangganan: "+t.t1.message);case 35:case"end":return t.stop()}}),t,null,[[0,31],[13,18]])})))).apply(this,arguments)}function Ba(){return Ca.apply(this,arguments)}function Ca(){return(Ca=Ta(ba().mark((function t(){var n,e,r;return ba().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ia();case 2:if(n=t.sent){t.next=6;break}return alert("Belum ada langganan aktif."),t.abrupt("return");case 6:return t.prev=6,t.next=9,ct(n.toJSON());case 9:return t.prev=9,t.next=12,In(n.endpoint);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(9),console.warn("Gagal hapus dari IndexedDB:",t.t0);case 17:return t.next=19,n.unsubscribe();case 19:return localStorage.removeItem("isSubscribed"),Wa&&(clearInterval(Wa),Wa=null,console.log("Notifikasi berkala dihentikan")),t.next=23,navigator.serviceWorker.ready;case 23:e=t.sent,null==(r=e.active||e.waiting||e.installing)||r.postMessage({type:"SHOW_NOTIFICATION",title:"Berhenti Berlangganan",body:"Success to unsubscribe web push notification."}),alert("Success to unsubscribe web push notification."),console.log("Unsubscribe berhasil"),t.next=34;break;case 30:t.prev=30,t.t1=t.catch(6),console.error("Unsubscribe gagal:",t.t1),alert("Gagal berhenti berlangganan: "+t.t1.message);case 34:case"end":return t.stop()}}),t,null,[[6,30],[9,14]])})))).apply(this,arguments)}console.log("NotificationHelper loaded");var Wa=null;function Da(){return Ha.apply(this,arguments)}function Ha(){return Ha=Ta(ba().mark((function t(){var n,e,r=arguments;return ba().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.length>0&&void 0!==r[0]?r[0]:6e4,"serviceWorker"in navigator){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,navigator.serviceWorker.ready;case 6:e=t.sent,Wa&&clearInterval(Wa),Wa=setInterval((function(){try{var t=e.active||e.waiting||e.installing;null==t||t.postMessage({type:"SHOW_NOTIFICATION",title:"Waktunya Menulis",body:"Saatnya kamu membuat story yang keren, jangan kalah sama author yang lain",actions:[{action:"open-add-page",title:"Buat Story"}],data:{url:"".concat(window.location.origin,"/#/add")}}),console.log("Periodic message sent to SW")}catch(t){console.error("Failed to send periodic message to SW",t)}}),n),console.log("Notifikasi berkala dimulai:",n),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),console.error("Tidak dapat memulai notifikasi berkala",t.t0);case 15:case"end":return t.stop()}}),t,null,[[3,12]])}))),Ha.apply(this,arguments)}function za(){return Ra.apply(this,arguments)}function Ra(){return(Ra=Ta(ba().mark((function t(){return ba().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,La();case 2:if(!t.sent){t.next=8;break}return t.next=5,Ba();case 5:return t.abrupt("return",{subscribed:!1});case 8:return t.next=10,Ma();case 10:return t.abrupt("return",{subscribed:!0});case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ya(t){return Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ya(t)}function Ua(){var t=Za(),n=t.m(Ua),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,qa(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Ua=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Xa(t,n)},AsyncIterator:$a,async:function(t,n,e,o,a){return(r(n)?Va:Ja)(i(t),n,e,o,a)},keys:Ka,values:qa}})()}function qa(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Ya(t)+" is not iterable")}function Ka(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Ja(t,n,e,r,o){var i=Va(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Va(t,n,e,r,o){return new $a(Za().w(t,n,e,r),o||Promise)}function $a(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Xa?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Qa($a.prototype),Qa($a.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Qa(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Za(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Qa(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Qa(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Qa(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Qa(l,"constructor",s),Qa(s,"constructor",c),c.displayName="GeneratorFunction",Qa(s,o,"GeneratorFunction"),Qa(l),Qa(l,o,"Generator"),Qa(l,r,(function(){return this})),Qa(l,"toString",(function(){return"[object Generator]"})),(Za=function(){return{w:i,m:p}})()}function Qa(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Qa=function(t,n,e,r){function i(n,e){Qa(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},Qa(t,n,e,r)}function Xa(t,n){this.v=t,this.k=n}function tu(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function nu(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){tu(i,r,o,a,u,"next",t)}function u(t){tu(i,r,o,a,u,"throw",t)}a(void 0)}))}}function eu(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ru(r.key),r)}}function ru(t){var n=function(t){if("object"!=Ya(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Ya(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ya(n)?n:n+""}function ou(t,n,e){iu(t,n),n.set(t,e)}function iu(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function au(t,n){return t.get(cu(t,n))}function uu(t,n,e){return t.set(cu(t,n),e),e}function cu(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}"true"===localStorage.getItem("isSubscribed")&&Da(6e4);var su=new WeakMap,fu=new WeakMap,lu=new WeakMap,pu=new WeakMap,vu=new WeakSet;function yu(){var t,n;au(pu,this)&&au(su,this)&&(t=au(pu,this),n=au(su,this),t.addEventListener("click",(function(){return n.focus()}))),cu(vu,this,hu).call(this)}function hu(){var t=this;au(fu,this)&&au(fu,this).addEventListener("click",(function(){au(lu,t)&&au(lu,t).classList.toggle("open")})),document.body.addEventListener("click",(function(n){var e=!1,r=!1;au(lu,t)&&(e=au(lu,t).contains(n.target)),au(fu,t)&&(r=au(fu,t).contains(n.target)),e||r||au(lu,t)&&au(lu,t).classList.remove("open"),au(lu,t)&&au(lu,t).querySelectorAll("a").forEach((function(e){e.contains(n.target)&&au(lu,t).classList.remove("open")}))}))}function du(){var t=!!E(),n=document.getElementById("nav-list");if(n){var e='\n        <li><a href="#/">Beranda</a></li>\n        <li><a href="#/about">About</a></li>\n    ';if(t){n.innerHTML=e+'\n    <li><a id="bookmark-page-button" class="btn bookmark-page-button" href="#/bookmark"><i class="fa-solid fa-bookmark"></i> Bookmark</a></li>\n    <li><a id="push-notification-button" class="btn push-notification-button"><i class="fa-solid fa-bell"></i> Subscribe</a></li>\n    <li><a id="new-report-button" class="btn new-report-button" href="#/add"><i class="fa-solid fa-plus"></i> Buat Laporan</a></li>\n    <li><a id="logout-button" class="logout-button" href="#/logout"><i class="fa-solid fa-door-open"></i> Logout</a></li>\n  ';var r=document.getElementById("push-notification-button");r&&r.addEventListener("click",function(){var t=nu(Ua().mark((function t(n){return Ua().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,za();case 4:t.sent.subscribed?(alert("Notification berhasil di subscribe"),r.textContent="Unsubscribe",r.setAttribute("aria-pressed","true")):(alert("Anda berhenti berlangganan"),r.textContent="Subscribe",r.setAttribute("aria-pressed","false")),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error("Toggle subscription error:",t.t0),alert("Terjadi kesalahan saat mengubah status langganan");case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(n){return t.apply(this,arguments)}}());var o=document.getElementById("logout-button");o&&o.addEventListener("click",(function(t){t.preventDefault(),confirm("Apakah Anda yakin ingin keluar?")&&(G(),location.hash="/login")}))}else n.innerHTML=e+'\n    <li><a id="push-notification-button" class="btn push-notification-button"><i class="fa-solid fa-bell"></i> Subscribe</a></li>\n    <li><a id="login-button" class="btn login-button" href="#/login">Login</a></li>\n    <li><a id="register-button" class="btn register-button" href="#/register">Register</a></li>\n  '}}const mu=function(){return t=function t(n){var e,r=n.content,o=n.navigationDrawer,i=n.drawerButton,a=n.skipLinkButton;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),iu(this,e=vu),e.add(this),ou(this,su,void 0),ou(this,fu,void 0),ou(this,lu,void 0),ou(this,pu,void 0),uu(su,this,r),uu(fu,this,i),uu(lu,this,o),uu(pu,this,a),cu(vu,this,yu).call(this)},n=[{key:"renderPage",value:(e=nu(Ua().mark((function t(){var n,e,r,o,i=this;return Ua().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=location.hash.replace("#","")||"/",s=void 0,s=c.split("/"),a={resource:s[1]||null,id:s[2]||null},u=void 0,u="",a.resource&&(u=u.concat("/".concat(a.resource))),a.id&&(u=u.concat("/:id")),(e=da[n=u||"/"])||console.warn('URL tidak terdaftar: "'.concat(n,'"')),r=e){t.next=7;break}return console.error('Tidak ada halaman untuk rute: "'.concat(n,'".')),t.abrupt("return");case 7:o=S({updateDOM:function(){var t=nu(Ua().mark((function t(){return Ua().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.render();case 2:au(su,i).innerHTML=t.sent,r.afterRender();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),skipTransition:"/"===n}),o.updateCallbackDone.then((function(){scrollTo({top:0,behavior:"instant"}),cu(vu,i,du).call(i)}));case 9:case"end":return t.stop()}var a,u,c,s}),t)}))),function(){return e.apply(this,arguments)})}],n&&eu(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e}();function bu(t){return bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bu(t)}function gu(){var t=ju(),n=t.m(gu),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,wu(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(gu=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Pu(t,n)},AsyncIterator:Ou,async:function(t,n,e,o,a){return(r(n)?Su:xu)(i(t),n,e,o,a)},keys:ku,values:wu}})()}function wu(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(bu(t)+" is not iterable")}function ku(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function xu(t,n,e,r,o){var i=Su(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Su(t,n,e,r,o){return new Ou(ju().w(t,n,e,r),o||Promise)}function Ou(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Pu?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(_u(Ou.prototype),_u(Ou.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),_u(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function ju(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return _u(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(_u(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,_u(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,_u(l,"constructor",s),_u(s,"constructor",c),c.displayName="GeneratorFunction",_u(s,o,"GeneratorFunction"),_u(l),_u(l,o,"Generator"),_u(l,r,(function(){return this})),_u(l,"toString",(function(){return"[object Generator]"})),(ju=function(){return{w:i,m:p}})()}function _u(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}_u=function(t,n,e,r){function i(n,e){_u(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},_u(t,n,e,r)}function Pu(t,n){this.v=t,this.k=n}function Tu(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return Eu(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Eu(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw i}}}}function Eu(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function Nu(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Iu(){return Gu.apply(this,arguments)}function Gu(){var t;return t=gu().mark((function t(){var n,e,r,o;return gu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Vn();case 2:if(0!==(n=t.sent).length){t.next=5;break}return t.abrupt("return");case 5:console.log("Mengirim ".concat(n.length," story ke server")),e=Tu(n),t.prev=7,e.s();case 9:if((r=e.n()).done){t.next=29;break}return o=r.value,t.prev=11,t.next=14,fetch("https://story-api.dicoding.dev/v1/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 14:if(!t.sent.ok){t.next=21;break}return t.next=18,Zn(o.tempId);case 18:console.log(" Story terkirim:",o.tempId),t.next=22;break;case 21:console.warn("Gagal kirim story:",o.tempId);case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(11),console.error("Error saat mengirim story:",t.t0);case 27:t.next=9;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(7),e.e(t.t1);case 34:return t.prev=34,e.f(),t.finish(34);case 37:case"end":return t.stop()}}),t,null,[[7,31,34,37],[11,24]])})),Gu=function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Nu(i,r,o,a,u,"next",t)}function u(t){Nu(i,r,o,a,u,"throw",t)}a(void 0)}))},Gu.apply(this,arguments)}function Lu(t){return Lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lu(t)}function Fu(){var t=Du(),n=t.m(Fu),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Mu(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Fu=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new zu(t,n)},AsyncIterator:Wu,async:function(t,n,e,o,a){return(r(n)?Cu:Bu)(i(t),n,e,o,a)},keys:Au,values:Mu}})()}function Mu(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Lu(t)+" is not iterable")}function Au(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Bu(t,n,e,r,o){var i=Cu(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Cu(t,n,e,r,o){return new Wu(Du().w(t,n,e,r),o||Promise)}function Wu(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof zu?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Hu(Wu.prototype),Hu(Wu.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Hu(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Du(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Hu(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Hu(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Hu(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Hu(l,"constructor",s),Hu(s,"constructor",c),c.displayName="GeneratorFunction",Hu(s,o,"GeneratorFunction"),Hu(l),Hu(l,o,"Generator"),Hu(l,r,(function(){return this})),Hu(l,"toString",(function(){return"[object Generator]"})),(Du=function(){return{w:i,m:p}})()}function Hu(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Hu=function(t,n,e,r){function i(n,e){Hu(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},Hu(t,n,e,r)}function zu(t,n){this.v=t,this.k=n}function Ru(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Yu(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Ru(i,r,o,a,u,"next",t)}function u(t){Ru(i,r,o,a,u,"throw",t)}a(void 0)}))}}document.addEventListener("DOMContentLoaded",Yu(Fu().mark((function t(){var n;return Fu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new mu({content:document.querySelector("#main-content"),drawerButton:document.querySelector("#drawer-button"),navigationDrawer:document.querySelector("#navigation-drawer"),skipLinkButton:document.querySelector("#skip-link")}),t.next=3,n.renderPage();case 3:return t.next=5,O();case 5:t.sent&&console.log("service worker aktif dan akan menerima notifikasi"),navigator.serviceWorker.addEventListener("message",(function(t){console.log("service worker: ",t.data)})),window.addEventListener("online",Yu(Fu().mark((function t(){return Fu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Iu();case 2:case"end":return t.stop()}}),t)})))),window.addEventListener("hashchange",Yu(Fu().mark((function t(){return Fu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.renderPage();case 2:case"end":return t.stop()}}),t)}))));case 10:case"end":return t.stop()}}),t)}))))})();